<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Change in Patient Count Over Time with Respect to Different Regions and SIMD</title>
    <meta charset="utf-8" />
    <meta name="author" content="the RegRession Rebels   Kenny Chen, Matthew Brown, Jake Leung, Aleksandra Iwaszkiewicz, Sarah De Giuli" />
    <meta name="date" content="2023-11-28" />
    <script src="libs/header-attrs-2.25/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Change in Patient Count Over Time with Respect to Different Regions and SIMD
]
.author[
### the RegRession Rebels <br> Kenny Chen, Matthew Brown, Jake Leung, Aleksandra Iwaszkiewicz, Sarah De Giuli
]
.institute[
### University of Edinburgh
]
.date[
### 2023-11-28
]

---













class: center, middle

## To see if there is a correlation between how patient/discharge count has changed over time and your SIMD score


---

class: inverse, center, middle

# Cleaning Datasets

---

# Cleaning Datasets 

```r
diagnosis_BUT_READABLE &lt;- diagnosis %&gt;% 
  mutate(icd_categories = case_when(
    ICD10Codes == "F00 - F09 or Chapter G and second position F00" ~ "Organic, including symptomatic, mental disorders", 
    ICD10Codes == "F10 - F19" ~ "Mental &amp; behavioural disorders due to psychoactive substance use", 
    ICD10Codes == "F20 - F29" ~ "Schizophrenia, schizotypal, &amp; delusional disorders", 
    ICD10Codes == "F30 - F39" ~ "Mood (affective) disorders", 
    ICD10Codes == "F40 - F49" ~ "Neurotic, stress-related, &amp; somatoform disorders", 
    ICD10Codes == "F60 - F69" ~ "Disorders of adult personality &amp; behaviour", 
    ICD10Codes == "F50 - F59, F70 - F99" ~ "Other selected diagnoses principally affecting children &amp; young people", 
    ICD10Codes == "Non-F codes" ~ "Unrecognized diagnosis", 
                       .default = ICD10Codes )) %&gt;% 
  select(!ICD10Codes)
```
- We chose to translate our data sets since technical codes are used thoroughly throughout the data set this made it easier for us and others to read it. This is an example above.

---

```r
diagnosis_BUT_READABLE &lt;- diagnosis_BUT_READABLE %&gt;% 
  mutate(hbt_translated = case_when(
    HBT == "S92000003" ~ "Scotland",
    HBT == "S08000015" ~ "Ayrshire and Arran",
    HBT == "S08000016" ~ "Borders",
    HBT == "S08000017" ~ "Dumfries and Galloway",
    HBT == "S08000018" ~ "Fife",
    HBT == "S08000019" ~ "Forth Valley",
    HBT == "S08000020" ~ "Grampian",
    HBT == "S08000021" ~ "Greater Glasgow and Clyde",
    HBT == "S08000022" ~ "Highland",
    HBT == "S08000023" ~ "Lanarkshire",
    HBT == "S08000024" ~ "Lothian",
    HBT == "S08000025" ~ "Orkney",
    HBT == "S08000026" ~ "Shetland",
    HBT == "S08000027" ~ "Tayside",
    HBT == "S08000028" ~ "Western Isles",
    HBT == "S08000029" ~ "Fife",
    HBT == "S08000030" ~ "Tayside",
    HBT == "S08000031" ~ "Greater Glasgow and Clyde",
    HBT == "S08000032" ~ "Lanarkshire",
              .default = HBT)) %&gt;% 
  select(!HBT)
```

- Another example here
---

class: inverse, middle, center

# Initial Visuals

---

&lt;img src="presentation_files/figure-html/visual1-1.png" width="80%" /&gt;
We decided to see if we could find trends in the patient count data to see if correlations could be found between this and SIMD. Here it looks to have a general falling of patients from 1997/98 but starts rising again after 2013/14 and dropping suddenly at 2020/21 due to COVID
---
&lt;img src="presentation_files/figure-html/visual2-1.png" width="80%" /&gt;
A similar pattern can be found here with the discharge counts
---
&lt;img src="presentation_files/figure-html/visual3-1.png" width="80%" /&gt;

Mostly a downward trend here with the SIMD attempting to visualize how SIMD may affect patient counts to see if there is a clear correlation. Seemingly no effect.
---

```
## `geom_smooth()` using formula = 'y ~ x'
```

&lt;img src="presentation_files/figure-html/visual4-1.png" width="80%" /&gt;

This visualization shows something similar.
---
class: inverse, middle, center
#Linear Models
---
#Linear Model 1

```r
deprivation_lin_model &lt;- linear_reg() %&gt;% 
  set_engine("lm") %&gt;% 
  fit(PatientsRates ~ SIMD, data = deprivation_BUT_READABLE)
tidy(deprivation_lin_model)
```

```
## # A tibble: 2 × 5
##   term         estimate std.error statistic   p.value
##   &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)  0.00529  0.0000620      85.3 0        
## 2 SIMD        -0.000762 0.0000187     -40.7 4.46e-318
```
---
&lt;img src="presentation_files/figure-html/linear model1.2-1.png" width="80%" /&gt;
---
#Quick fix

```r
diagnosis_pre_2011 &lt;- diagnosis_BUT_READABLE %&gt;%
  mutate(FinancialYear = strtoi (substring(FinancialYear, 1,4))) %&gt;%
  filter(FinancialYear &lt; 2011, FinancialYear &lt; 2020)
  
  diagnosis_post_2011 &lt;- diagnosis_BUT_READABLE %&gt;%
  mutate(FinancialYear = strtoi (substring(FinancialYear, 1,4))) %&gt;%
  filter(FinancialYear &gt;= 2011 , FinancialYear &lt; 2020)
```

---
#Linear Model 2

```r
diagnosis_pre_2011_lin_model &lt;- linear_reg() %&gt;% 
  set_engine("lm") %&gt;% 
  fit(PatientsCount ~ FinancialYear, data = diagnosis_pre_2011)

diagnosis_pre_2011_lin_model
```

```
## parsnip model object
## 
## 
## Call:
## stats::lm(formula = PatientsCount ~ FinancialYear, data = data)
## 
## Coefficients:
##   (Intercept)  FinancialYear  
##     13735.290         -6.682
```
---

```r
diagnosis_post_2011_lin_model &lt;- linear_reg() %&gt;% 
  set_engine("lm") %&gt;% 
  fit(PatientsCount ~ FinancialYear, data = diagnosis_post_2011)

diagnosis_post_2011_lin_model
```

```
## parsnip model object
## 
## 
## Call:
## stats::lm(formula = PatientsCount ~ FinancialYear, data = data)
## 
## Coefficients:
##   (Intercept)  FinancialYear  
##     -8733.332          4.492
```
---
# Code


```r
# a boring regression
model &lt;- lm(dist ~ speed, data = cars)
tidy(model)
```

```
## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)   -17.6      6.76      -2.60 1.23e- 2
## 2 speed           3.93     0.416      9.46 1.49e-12
```

```r
glance(model)
```

```
## # A tibble: 1 × 12
##   r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC
##       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0.651         0.644  15.4      89.6 1.49e-12     1  -207.  419.  425.
## # ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;
```

---

# Plots



&lt;img src="presentation_files/figure-html/plot-iris-1.png" width="80%" /&gt;

---

## Plot and text

.pull-left[
- Some text
- goes here
]
.pull-right[
&lt;img src="presentation_files/figure-html/unnamed-chunk-3-1.png" width="100%" /&gt;
]

---

# Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Width &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Width &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Species &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Images

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/edinburgh-castle.jpg" alt="Image credit: Photo by Jörg Angeli on Unsplash." width="55%" /&gt;
&lt;p class="caption"&gt;Image credit: Photo by Jörg Angeli on Unsplash.&lt;/p&gt;
&lt;/div&gt;

Or you can also include a full page image. See next slide.

---


class: inverse, center, middle
background-image: url(img/edinburgh-castle.jpg)
background-size: contain
---

# Math Expressions

You can write LaTeX math expressions inside a pair of dollar signs, e.g. &amp;#36;\alpha+\beta$ renders `\(\alpha+\beta\)`. You can use the display style with double dollar signs:

```
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

`$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$`

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---

# Feeling adventurous?

- Want to find out more about `xaringan`? See https://slides.yihui.name/xaringan/#1.

- You are welcome to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

- But some of you might want to play around with slide styling. The 
`xaringanthemer` provides some solutions for this that: https://pkg.garrickadenbuie.com/xaringanthemer.

- And if you want more bells and whistles, there is also `xaringanExtra`: https://pkg.garrickadenbuie.com/xaringanExtra.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
